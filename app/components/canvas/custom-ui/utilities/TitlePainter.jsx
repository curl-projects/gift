import { useRef, useState, useEffect, useCallback } from "react"
import styles from "./TitlePainter.module.css"
import { motion, AnimatePresence } from "framer-motion"
import { useStarFireSync } from "~/components/synchronization/StarFireSync";

const motionPaths = [
    "M 0 64.3 L 1.8 63 Q 3.6 65.4 5.7 67.35 Q 7.8 69.3 10.4 70.75 Q 13 72.2 16.25 72.95 A 27.58 27.58 0 0 0 19.528 73.488 Q 21.205 73.667 23.093 73.695 A 47.827 47.827 0 0 0 23.8 73.7 Q 33.4 73.7 38.65 69.45 A 13.685 13.685 0 0 0 43.425 61.527 A 21.25 21.25 0 0 0 43.9 56.9 A 22.808 22.808 0 0 0 43.694 53.747 Q 43.463 52.094 42.973 50.701 A 12.441 12.441 0 0 0 42.55 49.65 A 14.216 14.216 0 0 0 40.659 46.571 A 12.162 12.162 0 0 0 38.95 44.85 A 16.609 16.609 0 0 0 34.799 42.372 A 19.397 19.397 0 0 0 33.7 41.95 Q 30.7 40.9 27.5 40.4 L 19.5 39.1 Q 14.2 38.2 10.75 36.45 A 20.901 20.901 0 0 1 7.867 34.699 A 15.258 15.258 0 0 1 5.25 32.3 Q 3.2 29.9 2.4 27 Q 1.6 24.1 1.6 21 A 21.112 21.112 0 0 1 1.941 17.117 A 15.748 15.748 0 0 1 3.15 13.3 Q 4.7 10 7.55 7.85 A 18.518 18.518 0 0 1 11.674 5.526 A 23.548 23.548 0 0 1 14.4 4.6 A 30.074 30.074 0 0 1 19.185 3.711 A 38.765 38.765 0 0 1 23.3 3.5 Q 29.356 3.5 33.711 4.871 A 19.688 19.688 0 0 1 36.95 6.2 A 23.512 23.512 0 0 1 41.91 9.632 A 19.813 19.813 0 0 1 45 13.2 L 43.3 14.6 Q 40.2 10.1 35.4 7.8 Q 31.641 5.999 26.225 5.608 A 43.482 43.482 0 0 0 23.1 5.5 Q 14 5.5 8.9 9.35 A 12.394 12.394 0 0 0 4.203 16.925 A 19.431 19.431 0 0 0 3.8 21 Q 3.8 25.1 5.1 27.9 A 13.699 13.699 0 0 0 7.434 31.434 A 12.597 12.597 0 0 0 8.6 32.55 A 16.453 16.453 0 0 0 13.118 35.229 A 18.852 18.852 0 0 0 13.7 35.45 A 31.725 31.725 0 0 0 18.677 36.793 A 35.957 35.957 0 0 0 19.9 37 L 27.9 38.3 A 41.36 41.36 0 0 1 31.751 39.109 Q 34.731 39.894 36.95 41.05 A 20.869 20.869 0 0 1 39.76 42.793 Q 41.375 43.994 42.5 45.4 A 15.21 15.21 0 0 1 44.958 49.727 A 14.279 14.279 0 0 1 45.3 50.8 Q 46.1 53.7 46.1 56.8 A 23.166 23.166 0 0 1 45.449 62.468 A 15.157 15.157 0 0 1 40.05 70.95 A 20.973 20.973 0 0 1 32.515 74.639 Q 28.621 75.7 23.8 75.7 A 42.688 42.688 0 0 1 19.707 75.513 Q 17.513 75.302 15.6 74.85 A 29.893 29.893 0 0 1 11.787 73.688 A 24.283 24.283 0 0 1 9.15 72.5 Q 6.3 71 4.1 68.9 Q 1.9 66.8 0 64.3 Z",
    "M 105.6 74.5 L 80 74.5 A 4.175 4.175 0 0 1 78.852 74.356 Q 77.565 73.988 77.224 72.674 A 4.273 4.273 0 0 1 77.1 71.6 L 77.1 24.8 L 57 24.8 L 57 22.9 L 74.2 22.9 A 4.175 4.175 0 0 0 75.348 22.756 Q 76.635 22.388 76.976 21.074 A 4.273 4.273 0 0 0 77.1 20 L 77.1 4.7 L 79.2 4.7 L 79.2 22.9 L 105.6 22.9 L 105.6 24.8 L 79.2 24.8 L 79.2 72.6 L 105.6 72.6 L 105.6 74.5 Z",
    "M 166.5 74.5 L 158.8 74.5 A 4.175 4.175 0 0 1 157.652 74.356 Q 156.365 73.988 156.024 72.674 A 4.273 4.273 0 0 1 155.9 71.6 L 155.9 66.8 L 155.6 66.8 A 15.477 15.477 0 0 1 152.385 70.929 A 20.621 20.621 0 0 1 149.65 73.05 A 14.277 14.277 0 0 1 145.823 74.766 Q 144.029 75.291 141.873 75.521 A 33.759 33.759 0 0 1 138.3 75.7 A 30.285 30.285 0 0 1 133.493 75.344 Q 128.625 74.559 125.6 72.05 A 11.805 11.805 0 0 1 121.548 65.124 A 17.893 17.893 0 0 1 121.2 61.5 Q 121.2 58.4 122.15 55.7 Q 123.1 53 125.35 51.1 Q 127.273 49.476 130.329 48.437 A 24.336 24.336 0 0 1 131.4 48.1 A 24.723 24.723 0 0 1 134.659 47.409 Q 136.367 47.156 138.344 47.06 A 52.477 52.477 0 0 1 140.9 47 L 155.9 47 L 155.9 38.9 Q 155.9 31.1 151.9 27.35 Q 148.099 23.787 141.59 23.609 A 25.313 25.313 0 0 0 140.9 23.6 Q 135.4 23.6 131.1 25.95 A 13.941 13.941 0 0 0 125.837 31.069 A 18.677 18.677 0 0 0 124.6 33.5 L 122.9 32.5 Q 125.1 27.5 129.55 24.6 Q 133.606 21.957 139.696 21.723 A 31.327 31.327 0 0 1 140.9 21.7 Q 147.496 21.7 151.705 24.618 A 13.851 13.851 0 0 1 153.5 26.1 A 14.302 14.302 0 0 1 157.3 32.785 Q 157.912 35.077 157.989 37.81 A 28.195 28.195 0 0 1 158 38.6 L 158 72.6 L 166.5 72.6 L 166.5 74.5 Z M 155.9 59.7 L 155.9 48.8 L 141 48.8 A 46.571 46.571 0 0 0 136.594 48.994 Q 131.946 49.437 129.098 50.895 A 10.148 10.148 0 0 0 127.5 51.9 A 10.631 10.631 0 0 0 124.801 54.896 A 9.673 9.673 0 0 0 123.5 59.9 L 123.5 63.1 A 10.457 10.457 0 0 0 124.077 66.656 Q 125.03 69.31 127.56 71.023 A 11.264 11.264 0 0 0 127.6 71.05 Q 131.188 73.456 136.689 73.757 A 29.516 29.516 0 0 0 138.3 73.8 Q 141.8 73.8 145 72.9 A 18.627 18.627 0 0 0 148.645 71.465 A 15.817 15.817 0 0 0 150.6 70.25 Q 153 68.5 154.45 65.85 A 11.74 11.74 0 0 0 155.757 61.817 A 15.152 15.152 0 0 0 155.9 59.7 Z",
    "M 181.4 74.5 L 181.4 72.6 L 199.2 72.6 L 199.2 24.8 L 181.4 24.8 L 181.4 22.9 L 201.3 22.9 L 201.3 32.9 L 201.6 32.9 Q 202.5 30.8 203.75 29 A 12.767 12.767 0 0 1 206.665 26.021 A 14.462 14.462 0 0 1 206.9 25.85 A 14.34 14.34 0 0 1 209.53 24.385 A 18.246 18.246 0 0 1 211.4 23.7 A 17.02 17.02 0 0 1 214.035 23.126 Q 215.641 22.9 217.5 22.9 L 229 22.9 L 229 24.8 L 217.1 24.8 Q 214 24.8 211.15 25.8 Q 208.3 26.8 206.1 28.85 A 14.054 14.054 0 0 0 203.306 32.516 A 17.113 17.113 0 0 0 202.6 34 Q 201.3 37.1 201.3 41.4 L 201.3 72.6 L 223.9 72.6 L 223.9 74.5 L 181.4 74.5 Z",
    "M 242.5 74.5 L 242.5 72.6 L 262.4 72.6 L 262.4 2.4 L 242.5 2.4 L 242.5 0.5 L 264.5 0.5 L 264.5 72.6 L 284.4 72.6 L 284.4 74.5 L 242.5 74.5 Z",
    "M 305.1 74.5 L 305.1 72.6 L 325.6 72.6 L 325.6 24.8 L 305.1 24.8 L 305.1 22.9 L 327.7 22.9 L 327.7 72.6 L 346.9 72.6 L 346.9 74.5 L 305.1 74.5 Z M 323.7 3.1 L 323.7 2.3 A 2.517 2.517 0 0 1 323.829 1.479 A 2.143 2.143 0 0 1 324.35 0.65 Q 324.958 0.042 326.396 0.003 A 7.432 7.432 0 0 1 326.6 0 Q 327.983 0 328.656 0.486 A 1.583 1.583 0 0 1 328.85 0.65 A 2.195 2.195 0 0 1 329.494 2.116 A 2.933 2.933 0 0 1 329.5 2.3 L 329.5 3.1 A 2.517 2.517 0 0 1 329.371 3.921 A 2.143 2.143 0 0 1 328.85 4.75 Q 328.242 5.358 326.804 5.397 A 7.432 7.432 0 0 1 326.6 5.4 Q 325.217 5.4 324.544 4.914 A 1.583 1.583 0 0 1 324.35 4.75 A 2.195 2.195 0 0 1 323.706 3.284 A 2.933 2.933 0 0 1 323.7 3.1 Z",
    "M 372.5 70.5 L 372.5 70.2 Q 370.391 69.598 369.161 68.456 A 5.311 5.311 0 0 1 368.45 67.65 A 6.706 6.706 0 0 1 367.244 64.377 A 8.568 8.568 0 0 1 367.2 63.5 A 7.617 7.617 0 0 1 367.716 60.651 A 6.958 6.958 0 0 1 369.8 57.85 Q 372.4 55.7 375.7 54.7 L 375.7 54.4 Q 371.4 52.5 369 48.6 A 15.509 15.509 0 0 1 367.093 43.766 Q 366.662 41.808 366.608 39.551 A 27.266 27.266 0 0 1 366.6 38.9 Q 366.6 31.1 371.2 26.4 A 15.157 15.157 0 0 1 378.853 22.23 A 22.687 22.687 0 0 1 383.9 21.7 Q 390.5 21.7 395 25.1 L 395 21.1 A 3.596 3.596 0 0 1 395.154 19.999 Q 395.53 18.831 396.822 18.516 A 4.568 4.568 0 0 1 397.9 18.4 L 409 18.4 L 409 20.3 L 396.9 20.3 L 396.9 26.8 A 15.766 15.766 0 0 1 399.586 30.931 A 18.613 18.613 0 0 1 400.05 32.05 A 17.699 17.699 0 0 1 401.038 36.156 A 22.558 22.558 0 0 1 401.2 38.9 A 21.083 21.083 0 0 1 400.782 43.175 A 17.468 17.468 0 0 1 399.95 46 Q 398.7 49.2 396.4 51.45 Q 394.1 53.7 390.95 54.9 Q 387.8 56.1 383.9 56.1 Q 382.4 56.1 381.1 55.9 Q 379.8 55.7 378.3 55.4 A 24.839 24.839 0 0 0 374.866 56.555 Q 370.881 58.262 369.699 60.954 A 6.017 6.017 0 0 0 369.2 63.4 Q 369.2 64.5 369.55 65.5 A 3.435 3.435 0 0 0 370.314 66.731 A 4.613 4.613 0 0 0 370.9 67.25 A 6.203 6.203 0 0 0 371.828 67.818 Q 372.591 68.203 373.6 68.5 Q 374.835 68.863 376.545 68.963 A 23.397 23.397 0 0 0 377.9 69 L 391.4 69 A 37.595 37.595 0 0 1 395.676 69.226 Q 400.23 69.749 402.927 71.485 A 9.421 9.421 0 0 1 403.9 72.2 Q 407.7 75.4 407.7 80.8 Q 407.7 88.48 401.532 92.081 A 15.435 15.435 0 0 1 401.5 92.1 Q 395.361 95.664 384.027 95.7 A 72.963 72.963 0 0 1 383.8 95.7 A 56.553 56.553 0 0 1 378.238 95.446 Q 371.159 94.744 367.45 92.1 A 12.758 12.758 0 0 1 364.275 88.937 A 10.951 10.951 0 0 1 362.4 82.6 A 13.097 13.097 0 0 1 362.867 79.019 A 10.18 10.18 0 0 1 365.05 75 A 13.807 13.807 0 0 1 368.681 72.117 Q 370.381 71.162 372.5 70.5 Z M 391.1 71 L 375.6 71 A 20.748 20.748 0 0 0 371.745 72.356 A 15.371 15.371 0 0 0 367.8 75 A 9.21 9.21 0 0 0 365.037 80.11 A 13.472 13.472 0 0 0 364.8 82.7 A 10.013 10.013 0 0 0 365.563 86.678 Q 366.643 89.201 369.25 90.9 A 16.152 16.152 0 0 0 373.747 92.882 Q 375.796 93.456 378.234 93.671 A 34.928 34.928 0 0 0 381.3 93.8 L 386.2 93.8 A 42.923 42.923 0 0 0 390.557 93.588 A 33.234 33.234 0 0 0 394.05 93.05 A 21.687 21.687 0 0 0 397.254 92.124 A 16.295 16.295 0 0 0 400.15 90.7 A 11.797 11.797 0 0 0 403.222 87.961 A 11.033 11.033 0 0 0 404.1 86.65 A 10.493 10.493 0 0 0 405.335 83.068 A 13.716 13.716 0 0 0 405.5 80.9 A 11.235 11.235 0 0 0 405.093 77.793 A 8.274 8.274 0 0 0 402.35 73.6 Q 399.2 71 391.1 71 Z M 398.8 40.8 L 398.8 37 Q 398.8 31.3 394.95 27.45 Q 391.1 23.6 383.9 23.6 Q 376.7 23.6 372.85 27.45 A 12.937 12.937 0 0 0 369.001 36.822 A 16.75 16.75 0 0 0 369 37 L 369 40.8 A 13.517 13.517 0 0 0 370.05 46.186 A 12.886 12.886 0 0 0 372.95 50.35 Q 376.755 54.059 383.391 54.195 A 24.854 24.854 0 0 0 383.9 54.2 Q 391.1 54.2 394.95 50.35 A 12.937 12.937 0 0 0 398.799 40.978 A 16.75 16.75 0 0 0 398.8 40.8 Z",
    "M 426.1 74.5 L 426.1 0.5 L 428.2 0.5 L 428.2 30.3 L 428.5 30.3 A 10.96 10.96 0 0 1 430.519 27.07 Q 431.785 25.634 433.65 24.35 A 13.499 13.499 0 0 1 437.543 22.55 Q 440.448 21.7 444.3 21.7 A 24.027 24.027 0 0 1 449.378 22.203 Q 454.309 23.27 457.3 26.6 Q 461.7 31.5 461.7 40.9 L 461.7 74.5 L 459.6 74.5 L 459.6 41.2 A 33.73 33.73 0 0 0 459.282 36.392 Q 458.48 30.839 455.655 27.859 A 10.384 10.384 0 0 0 455.55 27.75 A 13.114 13.114 0 0 0 449.524 24.285 Q 447.434 23.707 444.938 23.617 A 25.951 25.951 0 0 0 444 23.6 Q 440.9 23.6 438.05 24.45 Q 435.2 25.3 433 27 Q 430.8 28.7 429.5 31.3 Q 428.2 33.9 428.2 37.3 L 428.2 74.5 L 426.1 74.5 Z",
    "M 525.6 74.5 L 500 74.5 A 4.175 4.175 0 0 1 498.852 74.356 Q 497.565 73.988 497.224 72.674 A 4.273 4.273 0 0 1 497.1 71.6 L 497.1 24.8 L 477 24.8 L 477 22.9 L 494.2 22.9 A 4.175 4.175 0 0 0 495.348 22.756 Q 496.635 22.388 496.976 21.074 A 4.273 4.273 0 0 0 497.1 20 L 497.1 4.7 L 499.2 4.7 L 499.2 22.9 L 525.6 22.9 L 525.6 24.8 L 499.2 24.8 L 499.2 72.6 L 525.6 72.6 L 525.6 74.5 Z",
]

const subtitleMotionPaths = [
    "M 4.4 14.9 L 3.88 14.9 L 0 4.58 L 0.44 4.58 L 4.12 14.42 L 4.18 14.42 L 7.86 4.58 L 8.28 4.58 L 4.4 14.9 Z"
    ,"M 16.14 15.14 Q 15.04 15.14 14.19 14.73 A 3.516 3.516 0 0 1 13.021 13.809 A 4.354 4.354 0 0 1 12.75 13.45 A 5.064 5.064 0 0 1 12.275 12.559 Q 12.024 11.959 11.86 11.21 A 11.734 11.734 0 0 1 11.666 10.006 Q 11.593 9.356 11.57 8.614 A 22.673 22.673 0 0 1 11.56 7.92 A 20.844 20.844 0 0 1 11.602 6.557 Q 11.648 5.854 11.745 5.244 A 10.671 10.671 0 0 1 11.86 4.63 Q 12.16 3.26 12.75 2.39 Q 13.34 1.52 14.19 1.11 A 4.094 4.094 0 0 1 15.413 0.748 A 5.277 5.277 0 0 1 16.14 0.7 Q 17.24 0.7 18.09 1.11 A 3.471 3.471 0 0 1 19.293 2.08 A 4.291 4.291 0 0 1 19.52 2.39 A 5.208 5.208 0 0 1 19.976 3.247 Q 20.163 3.687 20.305 4.209 A 9.821 9.821 0 0 1 20.41 4.63 Q 20.664 5.753 20.71 7.244 A 21.99 21.99 0 0 1 20.72 7.92 A 20.174 20.174 0 0 1 20.676 9.283 Q 20.604 10.354 20.41 11.21 Q 20.1 12.58 19.52 13.45 A 3.882 3.882 0 0 1 18.788 14.278 A 3.34 3.34 0 0 1 18.09 14.73 A 4.094 4.094 0 0 1 16.867 15.092 A 5.277 5.277 0 0 1 16.14 15.14 Z M 20.24 8.56 L 20.24 7.28 A 14.737 14.737 0 0 0 20.157 5.66 Q 19.962 3.9 19.308 2.823 A 4.114 4.114 0 0 0 19.19 2.64 Q 18.14 1.1 16.14 1.1 A 4.117 4.117 0 0 0 14.799 1.308 A 3.35 3.35 0 0 0 13.09 2.64 Q 12.04 4.18 12.04 7.28 L 12.04 8.56 A 14.737 14.737 0 0 0 12.123 10.18 Q 12.318 11.94 12.972 13.017 A 4.114 4.114 0 0 0 13.09 13.2 Q 14.14 14.74 16.14 14.74 A 4.117 4.117 0 0 0 17.481 14.532 A 3.35 3.35 0 0 0 19.19 13.2 Q 20.24 11.66 20.24 8.56 Z M 15.64 8 L 15.64 7.84 A 0.484 0.484 0 0 1 15.662 7.69 A 0.404 0.404 0 0 1 15.75 7.54 A 0.309 0.309 0 0 1 15.861 7.465 Q 15.958 7.424 16.107 7.42 A 1.235 1.235 0 0 1 16.14 7.42 A 1.024 1.024 0 0 1 16.275 7.428 Q 16.449 7.451 16.53 7.54 A 0.415 0.415 0 0 1 16.638 7.791 A 0.55 0.55 0 0 1 16.64 7.84 L 16.64 8 A 0.484 0.484 0 0 1 16.618 8.15 A 0.404 0.404 0 0 1 16.53 8.3 A 0.309 0.309 0 0 1 16.419 8.375 Q 16.322 8.416 16.173 8.42 A 1.235 1.235 0 0 1 16.14 8.42 A 1.024 1.024 0 0 1 16.005 8.412 Q 15.831 8.389 15.75 8.3 A 0.415 0.415 0 0 1 15.642 8.049 A 0.55 0.55 0 0 1 15.64 8 Z"
    ,"M 27.46 14.46 L 27.46 14.3 A 0.604 0.604 0 0 1 27.504 14.061 Q 27.616 13.8 28.012 13.765 A 1.474 1.474 0 0 1 28.14 13.76 A 1.257 1.257 0 0 1 28.388 13.782 Q 28.773 13.86 28.815 14.211 A 0.755 0.755 0 0 1 28.82 14.3 L 28.82 14.46 A 0.604 0.604 0 0 1 28.776 14.699 Q 28.664 14.96 28.268 14.995 A 1.474 1.474 0 0 1 28.14 15 A 1.257 1.257 0 0 1 27.892 14.978 Q 27.507 14.9 27.465 14.549 A 0.755 0.755 0 0 1 27.46 14.46 Z"
    ,"M 45.14 14.9 L 36.1 14.9 L 36.1 14.5 L 40.48 14.5 L 40.48 1.26 L 40.42 1.26 L 36.1 4.88 L 35.84 4.56 L 40.16 0.94 L 40.92 0.94 L 40.92 14.5 L 45.14 14.5 L 45.14 14.9 Z"
    ,"M 51.46 14.46 L 51.46 14.3 A 0.604 0.604 0 0 1 51.504 14.061 Q 51.616 13.8 52.012 13.765 A 1.474 1.474 0 0 1 52.14 13.76 A 1.257 1.257 0 0 1 52.388 13.782 Q 52.773 13.86 52.815 14.211 A 0.755 0.755 0 0 1 52.82 14.3 L 52.82 14.46 A 0.604 0.604 0 0 1 52.776 14.699 Q 52.664 14.96 52.268 14.995 A 1.474 1.474 0 0 1 52.14 15 A 1.257 1.257 0 0 1 51.892 14.978 Q 51.507 14.9 51.465 14.549 A 0.755 0.755 0 0 1 51.46 14.46 Z M 51.46 5.18 L 51.46 5.02 A 0.604 0.604 0 0 1 51.504 4.781 Q 51.616 4.52 52.012 4.485 A 1.474 1.474 0 0 1 52.14 4.48 A 1.257 1.257 0 0 1 52.388 4.502 Q 52.773 4.58 52.815 4.931 A 0.755 0.755 0 0 1 52.82 5.02 L 52.82 5.18 A 0.604 0.604 0 0 1 52.776 5.419 Q 52.664 5.68 52.268 5.715 A 1.474 1.474 0 0 1 52.14 5.72 A 1.257 1.257 0 0 1 51.892 5.698 Q 51.507 5.62 51.465 5.269 A 0.755 0.755 0 0 1 51.46 5.18 Z"
    ,"M 80.42 14.9 L 72.3 14.9 L 72.3 0.94 L 80.42 0.94 L 80.42 1.34 L 72.74 1.34 L 72.74 7.62 L 80.14 7.62 L 80.14 8.02 L 72.74 8.02 L 72.74 14.5 L 80.42 14.5 L 80.42 14.9 Z"
    ,"M 84.42 14.9 L 83.92 14.9 L 87.88 9.72 L 83.98 4.58 L 84.5 4.58 L 88.12 9.36 L 88.16 9.36 L 91.8 4.58 L 92.3 4.58 L 88.4 9.7 L 92.36 14.9 L 91.84 14.9 L 88.16 10.04 L 88.12 10.04 L 84.42 14.9 Z" 
    ,"M 96.64 18.9 L 96.64 4.58 L 97.06 4.58 L 97.06 6.14 L 97.12 6.14 A 2.889 2.889 0 0 1 97.331 5.787 A 3.854 3.854 0 0 1 97.56 5.49 Q 97.84 5.16 98.24 4.91 Q 98.64 4.66 99.16 4.5 A 3.517 3.517 0 0 1 99.771 4.373 A 4.722 4.722 0 0 1 100.34 4.34 Q 102.34 4.34 103.44 5.69 Q 104.244 6.677 104.46 8.385 A 10.81 10.81 0 0 1 104.54 9.74 A 10.582 10.582 0 0 1 104.443 11.224 Q 104.335 11.982 104.108 12.593 A 4.184 4.184 0 0 1 103.44 13.79 A 3.585 3.585 0 0 1 101.06 15.092 A 5.244 5.244 0 0 1 100.34 15.14 Q 99.68 15.14 99.16 14.98 Q 98.64 14.82 98.24 14.57 A 3.196 3.196 0 0 1 97.767 14.212 A 2.751 2.751 0 0 1 97.56 14 A 3.062 3.062 0 0 1 97.26 13.597 A 2.55 2.55 0 0 1 97.12 13.34 L 97.06 13.34 L 97.06 18.9 L 96.64 18.9 Z M 104.08 10.22 L 104.08 9.26 Q 104.08 7.712 103.568 6.649 A 3.817 3.817 0 0 0 103.12 5.93 A 3.111 3.111 0 0 0 101.146 4.786 A 4.668 4.668 0 0 0 100.34 4.72 Q 99.7 4.72 99.1 4.92 A 3.527 3.527 0 0 0 98.354 5.266 A 3.101 3.101 0 0 0 98.05 5.48 Q 97.6 5.84 97.33 6.34 A 2.27 2.27 0 0 0 97.06 7.403 A 2.647 2.647 0 0 0 97.06 7.44 L 97.06 12.04 A 2.31 2.31 0 0 0 97.238 12.949 A 2.229 2.229 0 0 0 97.33 13.14 Q 97.6 13.64 98.05 14 A 3.269 3.269 0 0 0 98.862 14.472 A 3.848 3.848 0 0 0 99.1 14.56 Q 99.7 14.76 100.34 14.76 A 4.359 4.359 0 0 0 101.49 14.617 A 3.051 3.051 0 0 0 103.12 13.55 A 4.114 4.114 0 0 0 103.836 12.126 Q 104.004 11.55 104.056 10.865 A 8.464 8.464 0 0 0 104.08 10.22 Z"
    ,"M 107.96 14.9 L 107.96 14.52 L 111.94 14.52 L 111.94 0.48 L 107.96 0.48 L 107.96 0.1 L 112.36 0.1 L 112.36 14.52 L 116.34 14.52 L 116.34 14.9 L 107.96 14.9 Z"
    ,"M 124.14 15.14 Q 122.14 15.14 121.04 13.79 Q 120.236 12.803 120.02 11.095 A 10.81 10.81 0 0 1 119.94 9.74 A 10.582 10.582 0 0 1 120.037 8.256 Q 120.145 7.498 120.372 6.887 A 4.184 4.184 0 0 1 121.04 5.69 A 3.585 3.585 0 0 1 123.42 4.388 A 5.244 5.244 0 0 1 124.14 4.34 Q 126.14 4.34 127.24 5.69 Q 128.044 6.677 128.26 8.385 A 10.81 10.81 0 0 1 128.34 9.74 A 10.582 10.582 0 0 1 128.243 11.224 Q 128.135 11.982 127.908 12.593 A 4.184 4.184 0 0 1 127.24 13.79 A 3.585 3.585 0 0 1 124.86 15.092 A 5.244 5.244 0 0 1 124.14 15.14 Z M 127.88 10.22 L 127.88 9.26 Q 127.88 7.712 127.368 6.649 A 3.817 3.817 0 0 0 126.92 5.93 A 3.111 3.111 0 0 0 124.946 4.786 A 4.668 4.668 0 0 0 124.14 4.72 A 4.359 4.359 0 0 0 122.99 4.863 A 3.051 3.051 0 0 0 121.36 5.93 A 4.114 4.114 0 0 0 120.644 7.355 Q 120.476 7.93 120.424 8.615 A 8.464 8.464 0 0 0 120.4 9.26 L 120.4 10.22 Q 120.4 11.768 120.912 12.831 A 3.817 3.817 0 0 0 121.36 13.55 A 3.111 3.111 0 0 0 123.334 14.694 A 4.668 4.668 0 0 0 124.14 14.76 A 4.359 4.359 0 0 0 125.29 14.617 A 3.051 3.051 0 0 0 126.92 13.55 A 4.114 4.114 0 0 0 127.636 12.126 Q 127.804 11.55 127.856 10.865 A 8.464 8.464 0 0 0 127.88 10.22 Z"
    ,"M 131.74 14.9 L 131.74 14.52 L 135.3 14.52 L 135.3 4.96 L 131.74 4.96 L 131.74 4.58 L 135.72 4.58 L 135.72 6.58 L 135.78 6.58 Q 135.96 6.16 136.21 5.8 A 2.553 2.553 0 0 1 136.793 5.204 A 2.893 2.893 0 0 1 136.84 5.17 A 2.868 2.868 0 0 1 137.366 4.877 A 3.649 3.649 0 0 1 137.74 4.74 A 3.404 3.404 0 0 1 138.267 4.625 Q 138.528 4.588 138.822 4.582 A 5.894 5.894 0 0 1 138.96 4.58 L 141.26 4.58 L 141.26 4.96 L 138.88 4.96 Q 138.26 4.96 137.69 5.16 Q 137.12 5.36 136.68 5.77 A 2.811 2.811 0 0 0 136.121 6.503 A 3.422 3.422 0 0 0 135.98 6.8 Q 135.72 7.42 135.72 8.28 L 135.72 14.52 L 140.24 14.52 L 140.24 14.9 L 131.74 14.9 Z"
    ,"M 144.48 14.9 L 144.48 14.52 L 148.58 14.52 L 148.58 4.96 L 144.48 4.96 L 144.48 4.58 L 149 4.58 L 149 14.52 L 152.84 14.52 L 152.84 14.9 L 144.48 14.9 Z M 148.2 0.62 L 148.2 0.46 Q 148.2 0.26 148.33 0.13 Q 148.46 0 148.78 0 Q 149.057 0 149.191 0.097 A 0.317 0.317 0 0 1 149.23 0.13 A 0.439 0.439 0 0 1 149.359 0.423 A 0.586 0.586 0 0 1 149.36 0.46 L 149.36 0.62 Q 149.36 0.82 149.23 0.95 Q 149.1 1.08 148.78 1.08 Q 148.503 1.08 148.369 0.983 A 0.317 0.317 0 0 1 148.33 0.95 A 0.439 0.439 0 0 1 148.201 0.657 A 0.586 0.586 0 0 1 148.2 0.62 Z"
    ,"M 157.1 14.9 L 156.68 14.9 L 156.68 4.58 L 157.1 4.58 L 157.1 6.06 L 157.16 6.06 A 2.192 2.192 0 0 1 157.564 5.414 Q 157.762 5.19 158.033 4.984 A 4.159 4.159 0 0 1 158.19 4.87 A 2.7 2.7 0 0 1 158.969 4.51 Q 159.327 4.405 159.758 4.365 A 6.058 6.058 0 0 1 160.32 4.34 A 4.805 4.805 0 0 1 161.336 4.441 Q 162.322 4.654 162.92 5.32 Q 163.8 6.3 163.8 8.18 L 163.8 14.9 L 163.38 14.9 L 163.38 8.24 A 6.746 6.746 0 0 0 163.316 7.278 Q 163.156 6.168 162.591 5.572 A 2.079 2.079 0 0 0 162.57 5.55 A 2.623 2.623 0 0 0 161.365 4.857 Q 160.947 4.741 160.448 4.723 A 5.19 5.19 0 0 0 160.26 4.72 Q 159.64 4.72 159.07 4.89 A 3.13 3.13 0 0 0 158.244 5.269 A 2.896 2.896 0 0 0 158.06 5.4 Q 157.62 5.74 157.36 6.26 A 2.44 2.44 0 0 0 157.131 7.009 A 3.166 3.166 0 0 0 157.1 7.46 L 157.1 14.9 Z"
    ,"M 169.96 14.1 L 169.96 14.04 A 2.047 2.047 0 0 1 169.613 13.908 Q 169.427 13.816 169.292 13.691 A 1.062 1.062 0 0 1 169.15 13.53 A 1.341 1.341 0 0 1 168.909 12.875 A 1.714 1.714 0 0 1 168.9 12.7 A 1.523 1.523 0 0 1 169.003 12.13 A 1.392 1.392 0 0 1 169.42 11.57 Q 169.94 11.14 170.6 10.94 L 170.6 10.88 Q 169.74 10.5 169.26 9.72 A 3.102 3.102 0 0 1 168.879 8.753 Q 168.78 8.306 168.78 7.78 Q 168.78 6.22 169.7 5.28 A 3.031 3.031 0 0 1 171.231 4.446 A 4.537 4.537 0 0 1 172.24 4.34 A 4.245 4.245 0 0 1 173.297 4.466 A 3.244 3.244 0 0 1 174.46 5.02 L 174.46 4.22 Q 174.46 3.792 174.824 3.703 A 0.914 0.914 0 0 1 175.04 3.68 L 177.26 3.68 L 177.26 4.06 L 174.84 4.06 L 174.84 5.36 A 3.153 3.153 0 0 1 175.377 6.186 A 3.723 3.723 0 0 1 175.47 6.41 A 3.54 3.54 0 0 1 175.668 7.231 A 4.512 4.512 0 0 1 175.7 7.78 A 4.217 4.217 0 0 1 175.616 8.635 A 3.494 3.494 0 0 1 175.45 9.2 A 3.126 3.126 0 0 1 174.934 10.08 A 2.916 2.916 0 0 1 174.74 10.29 Q 174.28 10.74 173.65 10.98 A 3.642 3.642 0 0 1 172.77 11.19 A 4.597 4.597 0 0 1 172.24 11.22 Q 171.94 11.22 171.68 11.18 Q 171.42 11.14 171.12 11.08 A 4.968 4.968 0 0 0 170.433 11.311 Q 169.3 11.796 169.3 12.68 Q 169.3 12.9 169.37 13.1 A 0.687 0.687 0 0 0 169.523 13.346 A 0.923 0.923 0 0 0 169.64 13.45 A 1.241 1.241 0 0 0 169.826 13.564 Q 169.921 13.612 170.036 13.653 A 2.561 2.561 0 0 0 170.18 13.7 A 2.151 2.151 0 0 0 170.46 13.761 Q 170.715 13.8 171.04 13.8 L 173.74 13.8 A 7.519 7.519 0 0 1 174.595 13.845 Q 175.682 13.97 176.24 14.44 A 2.092 2.092 0 0 1 176.993 15.961 A 2.903 2.903 0 0 1 177 16.16 A 2.992 2.992 0 0 1 176.857 17.112 Q 176.579 17.945 175.76 18.42 Q 174.52 19.14 172.22 19.14 Q 170.292 19.14 169.274 18.616 A 2.629 2.629 0 0 1 168.95 18.42 A 2.552 2.552 0 0 1 168.315 17.787 A 2.19 2.19 0 0 1 167.94 16.52 A 2.619 2.619 0 0 1 168.033 15.804 A 2.036 2.036 0 0 1 168.47 15 Q 169 14.4 169.96 14.1 Z M 173.68 14.2 L 170.58 14.2 A 4.15 4.15 0 0 0 169.809 14.471 A 3.074 3.074 0 0 0 169.02 15 A 1.842 1.842 0 0 0 168.467 16.022 A 2.694 2.694 0 0 0 168.42 16.54 A 2.003 2.003 0 0 0 168.573 17.336 Q 168.765 17.785 169.2 18.104 A 2.435 2.435 0 0 0 169.31 18.18 A 3.23 3.23 0 0 0 170.209 18.576 Q 170.619 18.691 171.107 18.734 A 6.986 6.986 0 0 0 171.72 18.76 L 172.7 18.76 A 8.585 8.585 0 0 0 173.571 18.718 A 6.647 6.647 0 0 0 174.27 18.61 A 4.337 4.337 0 0 0 174.911 18.425 A 3.259 3.259 0 0 0 175.49 18.14 A 2.359 2.359 0 0 0 176.104 17.592 A 2.207 2.207 0 0 0 176.28 17.33 A 2.099 2.099 0 0 0 176.527 16.614 A 2.743 2.743 0 0 0 176.56 16.18 A 2.247 2.247 0 0 0 176.479 15.559 A 1.655 1.655 0 0 0 175.93 14.72 A 1.732 1.732 0 0 0 175.44 14.446 Q 174.939 14.255 174.159 14.213 A 8.731 8.731 0 0 0 173.68 14.2 Z M 175.22 8.16 L 175.22 7.4 Q 175.22 6.26 174.45 5.49 A 2.483 2.483 0 0 0 173.372 4.867 Q 172.98 4.752 172.509 4.727 A 5.04 5.04 0 0 0 172.24 4.72 A 4.307 4.307 0 0 0 171.367 4.803 Q 170.547 4.973 170.03 5.49 A 2.587 2.587 0 0 0 169.26 7.364 A 3.35 3.35 0 0 0 169.26 7.4 L 169.26 8.16 A 2.704 2.704 0 0 0 169.47 9.237 A 2.577 2.577 0 0 0 170.05 10.07 A 2.602 2.602 0 0 0 171.239 10.723 Q 171.693 10.84 172.24 10.84 A 4.307 4.307 0 0 0 173.113 10.757 Q 173.933 10.587 174.45 10.07 A 2.587 2.587 0 0 0 175.22 8.196 A 3.35 3.35 0 0 0 175.22 8.16 Z"
    ,"M 192.74 14.9 L 192.3 14.9 L 192.3 0.94 L 200.5 0.94 L 200.5 1.34 L 192.74 1.34 L 192.74 7.62 L 199.94 7.62 L 199.94 8.02 L 192.74 8.02 L 192.74 14.9 Z"
    ,"M 203.96 14.9 L 203.96 14.52 L 207.94 14.52 L 207.94 0.48 L 203.96 0.48 L 203.96 0.1 L 208.36 0.1 L 208.36 14.52 L 212.34 14.52 L 212.34 14.9 L 203.96 14.9 Z"
    ,"M 220.14 15.14 Q 218.14 15.14 217.04 13.79 Q 216.236 12.803 216.02 11.095 A 10.81 10.81 0 0 1 215.94 9.74 A 10.582 10.582 0 0 1 216.037 8.256 Q 216.145 7.498 216.372 6.887 A 4.184 4.184 0 0 1 217.04 5.69 A 3.585 3.585 0 0 1 219.42 4.388 A 5.244 5.244 0 0 1 220.14 4.34 Q 222.14 4.34 223.24 5.69 Q 224.044 6.677 224.26 8.385 A 10.81 10.81 0 0 1 224.34 9.74 A 10.582 10.582 0 0 1 224.243 11.224 Q 224.135 11.982 223.908 12.593 A 4.184 4.184 0 0 1 223.24 13.79 A 3.585 3.585 0 0 1 220.86 15.092 A 5.244 5.244 0 0 1 220.14 15.14 Z M 223.88 10.22 L 223.88 9.26 Q 223.88 7.712 223.368 6.649 A 3.817 3.817 0 0 0 222.92 5.93 A 3.111 3.111 0 0 0 220.946 4.786 A 4.668 4.668 0 0 0 220.14 4.72 A 4.359 4.359 0 0 0 218.99 4.863 A 3.051 3.051 0 0 0 217.36 5.93 A 4.114 4.114 0 0 0 216.644 7.355 Q 216.476 7.93 216.424 8.615 A 8.464 8.464 0 0 0 216.4 9.26 L 216.4 10.22 Q 216.4 11.768 216.912 12.831 A 3.817 3.817 0 0 0 217.36 13.55 A 3.111 3.111 0 0 0 219.334 14.694 A 4.668 4.668 0 0 0 220.14 14.76 A 4.359 4.359 0 0 0 221.29 14.617 A 3.051 3.051 0 0 0 222.92 13.55 A 4.114 4.114 0 0 0 223.636 12.126 Q 223.804 11.55 223.856 10.865 A 8.464 8.464 0 0 0 223.88 10.22 Z"
    ,"M 228.84 14.9 L 226.9 4.58 L 227.3 4.58 L 229.18 14.52 L 229.24 14.52 L 231.84 4.58 L 232.46 4.58 L 235.06 14.52 L 235.12 14.52 L 237 4.58 L 237.38 4.58 L 235.44 14.9 L 234.76 14.9 L 232.18 4.98 L 232.12 4.98 L 229.52 14.9 L 228.84 14.9 Z"
    ,"M 239.96 13.1 L 240.26 12.84 A 5.426 5.426 0 0 0 241.108 13.712 A 4.289 4.289 0 0 0 242.08 14.31 Q 243.096 14.758 244.47 14.76 A 8.511 8.511 0 0 0 244.48 14.76 Q 245.685 14.76 246.536 14.406 A 3.337 3.337 0 0 0 247.08 14.12 A 2.089 2.089 0 0 0 248.03 12.589 A 3.207 3.207 0 0 0 248.06 12.14 A 2.917 2.917 0 0 0 248.033 11.733 Q 248.004 11.526 247.943 11.353 A 1.504 1.504 0 0 0 247.87 11.18 Q 247.68 10.8 247.31 10.55 A 2.606 2.606 0 0 0 246.846 10.304 A 3.476 3.476 0 0 0 246.42 10.16 Q 245.904 10.021 245.25 9.922 A 14.702 14.702 0 0 0 245.24 9.92 L 243.64 9.7 A 11.741 11.741 0 0 1 242.848 9.56 A 9.432 9.432 0 0 1 242.35 9.44 Q 241.76 9.28 241.34 8.99 Q 240.92 8.7 240.68 8.25 Q 240.481 7.877 240.447 7.332 A 3.726 3.726 0 0 1 240.44 7.1 A 3.303 3.303 0 0 1 240.488 6.523 Q 240.558 6.129 240.73 5.82 Q 241.02 5.3 241.52 4.97 A 3.301 3.301 0 0 1 242.302 4.595 A 4.035 4.035 0 0 1 242.68 4.49 A 6.059 6.059 0 0 1 243.635 4.355 A 7.248 7.248 0 0 1 244.1 4.34 Q 244.86 4.34 245.47 4.48 Q 246.08 4.62 246.55 4.84 Q 247.02 5.06 247.39 5.36 A 7.067 7.067 0 0 1 247.778 5.698 A 5.648 5.648 0 0 1 248.04 5.96 L 247.76 6.26 Q 247.48 5.96 247.15 5.68 A 3.344 3.344 0 0 0 246.644 5.328 A 4.03 4.03 0 0 0 246.38 5.19 A 4.382 4.382 0 0 0 245.847 4.979 A 5.623 5.623 0 0 0 245.38 4.85 A 4.727 4.727 0 0 0 244.815 4.757 Q 244.473 4.72 244.08 4.72 A 6.206 6.206 0 0 0 243.145 4.786 Q 242.654 4.861 242.25 5.021 A 3.031 3.031 0 0 0 241.74 5.28 Q 240.86 5.84 240.86 7.08 A 2.917 2.917 0 0 0 240.887 7.487 Q 240.916 7.694 240.977 7.867 A 1.504 1.504 0 0 0 241.05 8.04 Q 241.24 8.42 241.61 8.67 Q 241.98 8.92 242.5 9.07 Q 243.02 9.22 243.68 9.3 L 245.28 9.52 A 11.741 11.741 0 0 1 246.072 9.66 A 9.432 9.432 0 0 1 246.57 9.78 Q 247.16 9.94 247.58 10.23 Q 248 10.52 248.24 10.98 A 1.992 1.992 0 0 1 248.418 11.486 Q 248.48 11.775 248.48 12.12 A 3.301 3.301 0 0 1 248.416 12.784 A 2.463 2.463 0 0 1 248.17 13.47 Q 247.86 14.04 247.33 14.41 Q 246.8 14.78 246.07 14.96 A 6.211 6.211 0 0 1 245.014 15.122 A 7.383 7.383 0 0 1 244.5 15.14 Q 241.58 15.14 239.96 13.1 Z"
    ,"M 270.5 2.64 L 270.12 2.82 Q 269.76 2.12 269.11 1.61 Q 268.46 1.1 267.44 1.1 A 3.377 3.377 0 0 0 266.634 1.191 A 2.298 2.298 0 0 0 265.52 1.81 Q 264.82 2.52 264.82 3.78 L 264.82 4.06 A 3.203 3.203 0 0 0 265.061 5.265 A 3.89 3.89 0 0 0 265.2 5.57 Q 265.58 6.32 266.16 6.98 L 270.38 11.92 L 270.44 11.92 A 4.49 4.49 0 0 0 270.574 11.497 A 5.443 5.443 0 0 0 270.64 11.22 A 8.199 8.199 0 0 0 270.706 10.865 Q 270.746 10.621 270.78 10.34 A 22.954 22.954 0 0 0 270.834 9.841 Q 270.863 9.54 270.89 9.2 A 40.993 40.993 0 0 0 270.932 8.606 Q 270.958 8.201 270.98 7.74 L 273.02 7.74 L 273.02 8.14 L 271.38 8.14 Q 271.28 9.68 271.14 10.64 A 10.015 10.015 0 0 1 271.006 11.374 Q 270.894 11.876 270.74 12.28 L 272.98 14.9 L 272.46 14.9 L 270.6 12.74 L 270.54 12.74 Q 270 13.84 269.03 14.49 Q 268.06 15.14 266.72 15.14 A 4.923 4.923 0 0 1 265.848 15.066 A 3.863 3.863 0 0 1 265.14 14.87 A 3.442 3.442 0 0 1 264.318 14.423 A 3.05 3.05 0 0 1 263.96 14.11 A 3.201 3.201 0 0 1 263.279 13.058 A 3.711 3.711 0 0 1 263.23 12.93 Q 262.98 12.24 262.98 11.42 Q 262.98 10.82 263.11 10.23 Q 263.24 9.64 263.56 9.09 A 4.253 4.253 0 0 1 264.096 8.366 A 5.193 5.193 0 0 1 264.41 8.05 Q 264.907 7.591 265.658 7.211 A 7.822 7.822 0 0 1 265.76 7.16 Q 265.18 6.5 264.77 5.68 A 3.921 3.921 0 0 1 264.37 4.168 A 4.684 4.684 0 0 1 264.36 3.86 A 3.901 3.901 0 0 1 264.486 2.844 A 2.878 2.878 0 0 1 265.2 1.57 A 2.799 2.799 0 0 1 266.834 0.745 A 3.957 3.957 0 0 1 267.44 0.7 Q 268.598 0.7 269.351 1.248 A 2.552 2.552 0 0 1 269.38 1.27 A 3.665 3.665 0 0 1 270.19 2.095 A 3.311 3.311 0 0 1 270.5 2.64 Z M 270.26 12.4 L 266 7.46 A 6.689 6.689 0 0 0 265.387 7.806 Q 265.026 8.037 264.75 8.29 A 4.851 4.851 0 0 0 264.289 8.773 A 3.747 3.747 0 0 0 263.97 9.22 Q 263.68 9.7 263.56 10.2 Q 263.44 10.7 263.44 11.2 L 263.44 11.66 A 3.297 3.297 0 0 0 263.597 12.683 A 3.092 3.092 0 0 0 263.66 12.86 Q 263.88 13.42 264.3 13.84 Q 264.72 14.26 265.34 14.5 Q 265.96 14.74 266.74 14.74 A 4.093 4.093 0 0 0 267.861 14.592 A 3.364 3.364 0 0 0 268.88 14.11 A 3.984 3.984 0 0 0 270.166 12.599 A 4.795 4.795 0 0 0 270.26 12.4 Z"
    ,"M 297.1 14.9 L 296.64 14.9 L 295.08 10.22 L 289.2 10.22 L 287.64 14.9 L 287.18 14.9 L 291.84 0.94 L 292.44 0.94 L 297.1 14.9 Z M 294.96 9.84 L 292.16 1.44 L 292.1 1.44 L 289.32 9.84 L 294.96 9.84 Z"
    ,"M 308.36 9.56 L 308.36 9.7 L 300.44 9.7 L 300.44 10.22 A 7.411 7.411 0 0 0 300.551 11.542 Q 300.686 12.285 300.985 12.876 A 3.791 3.791 0 0 0 301.42 13.55 A 3.173 3.173 0 0 0 303.359 14.68 A 4.798 4.798 0 0 0 304.26 14.76 Q 305.56 14.76 306.47 14.15 A 3.273 3.273 0 0 0 307.427 13.142 A 4.637 4.637 0 0 0 307.84 12.28 L 308.2 12.42 A 4.488 4.488 0 0 1 307.515 13.67 A 3.967 3.967 0 0 1 306.75 14.41 A 3.644 3.644 0 0 1 305.313 15.037 A 5.141 5.141 0 0 1 304.26 15.14 Q 302.22 15.14 301.1 13.79 Q 300.268 12.787 300.054 11.038 A 10.718 10.718 0 0 1 299.98 9.74 A 10.582 10.582 0 0 1 300.077 8.256 Q 300.185 7.498 300.412 6.887 A 4.184 4.184 0 0 1 301.08 5.69 A 3.585 3.585 0 0 1 303.46 4.388 A 5.244 5.244 0 0 1 304.18 4.34 Q 305.2 4.34 305.99 4.71 Q 306.78 5.08 307.3 5.76 A 4.417 4.417 0 0 1 307.852 6.719 A 5.632 5.632 0 0 1 308.09 7.4 A 7.058 7.058 0 0 1 308.307 8.547 A 9.356 9.356 0 0 1 308.36 9.56 Z M 300.44 9.26 L 300.44 9.34 L 307.92 9.34 L 307.92 9.26 Q 307.92 7.712 307.408 6.649 A 3.817 3.817 0 0 0 306.96 5.93 A 3.111 3.111 0 0 0 304.986 4.786 A 4.668 4.668 0 0 0 304.18 4.72 A 4.359 4.359 0 0 0 303.03 4.863 A 3.051 3.051 0 0 0 301.4 5.93 A 4.114 4.114 0 0 0 300.684 7.355 Q 300.516 7.93 300.464 8.615 A 8.464 8.464 0 0 0 300.44 9.26 Z"
    ,"M 311.96 13.1 L 312.26 12.84 A 5.426 5.426 0 0 0 313.108 13.712 A 4.289 4.289 0 0 0 314.08 14.31 Q 315.096 14.758 316.47 14.76 A 8.511 8.511 0 0 0 316.48 14.76 Q 317.685 14.76 318.536 14.406 A 3.337 3.337 0 0 0 319.08 14.12 A 2.089 2.089 0 0 0 320.03 12.589 A 3.207 3.207 0 0 0 320.06 12.14 A 2.917 2.917 0 0 0 320.033 11.733 Q 320.004 11.526 319.943 11.353 A 1.504 1.504 0 0 0 319.87 11.18 Q 319.68 10.8 319.31 10.55 A 2.606 2.606 0 0 0 318.846 10.304 A 3.476 3.476 0 0 0 318.42 10.16 Q 317.904 10.021 317.25 9.922 A 14.702 14.702 0 0 0 317.24 9.92 L 315.64 9.7 A 11.741 11.741 0 0 1 314.848 9.56 A 9.432 9.432 0 0 1 314.35 9.44 Q 313.76 9.28 313.34 8.99 Q 312.92 8.7 312.68 8.25 Q 312.481 7.877 312.447 7.332 A 3.726 3.726 0 0 1 312.44 7.1 A 3.303 3.303 0 0 1 312.488 6.523 Q 312.558 6.129 312.73 5.82 Q 313.02 5.3 313.52 4.97 A 3.301 3.301 0 0 1 314.302 4.595 A 4.035 4.035 0 0 1 314.68 4.49 A 6.059 6.059 0 0 1 315.635 4.355 A 7.248 7.248 0 0 1 316.1 4.34 Q 316.86 4.34 317.47 4.48 Q 318.08 4.62 318.55 4.84 Q 319.02 5.06 319.39 5.36 A 7.067 7.067 0 0 1 319.778 5.698 A 5.648 5.648 0 0 1 320.04 5.96 L 319.76 6.26 Q 319.48 5.96 319.15 5.68 A 3.344 3.344 0 0 0 318.644 5.328 A 4.03 4.03 0 0 0 318.38 5.19 A 4.382 4.382 0 0 0 317.847 4.979 A 5.623 5.623 0 0 0 317.38 4.85 A 4.727 4.727 0 0 0 316.815 4.757 Q 316.473 4.72 316.08 4.72 A 6.206 6.206 0 0 0 315.145 4.786 Q 314.654 4.861 314.25 5.021 A 3.031 3.031 0 0 0 313.74 5.28 Q 312.86 5.84 312.86 7.08 A 2.917 2.917 0 0 0 312.887 7.487 Q 312.916 7.694 312.977 7.867 A 1.504 1.504 0 0 0 313.05 8.04 Q 313.24 8.42 313.61 8.67 Q 313.98 8.92 314.5 9.07 Q 315.02 9.22 315.68 9.3 L 317.28 9.52 A 11.741 11.741 0 0 1 318.072 9.66 A 9.432 9.432 0 0 1 318.57 9.78 Q 319.16 9.94 319.58 10.23 Q 320 10.52 320.24 10.98 A 1.992 1.992 0 0 1 320.418 11.486 Q 320.48 11.775 320.48 12.12 A 3.301 3.301 0 0 1 320.416 12.784 A 2.463 2.463 0 0 1 320.17 13.47 Q 319.86 14.04 319.33 14.41 Q 318.8 14.78 318.07 14.96 A 6.211 6.211 0 0 1 317.014 15.122 A 7.383 7.383 0 0 1 316.5 15.14 Q 313.58 15.14 311.96 13.1 Z"
    ,"M 332.58 14.9 L 327.46 14.9 A 0.835 0.835 0 0 1 327.23 14.871 Q 326.88 14.771 326.88 14.32 L 326.88 4.96 L 322.86 4.96 L 322.86 4.58 L 326.3 4.58 A 0.835 0.835 0 0 0 326.53 4.551 Q 326.88 4.451 326.88 4 L 326.88 0.94 L 327.3 0.94 L 327.3 4.58 L 332.58 4.58 L 332.58 4.96 L 327.3 4.96 L 327.3 14.52 L 332.58 14.52 L 332.58 14.9 Z"
    ,"M 336.68 14.9 L 336.68 0.1 L 337.1 0.1 L 337.1 6.06 L 337.16 6.06 A 2.192 2.192 0 0 1 337.564 5.414 Q 337.762 5.19 338.033 4.984 A 4.159 4.159 0 0 1 338.19 4.87 A 2.7 2.7 0 0 1 338.969 4.51 Q 339.327 4.405 339.758 4.365 A 6.058 6.058 0 0 1 340.32 4.34 A 4.805 4.805 0 0 1 341.336 4.441 Q 342.322 4.654 342.92 5.32 Q 343.8 6.3 343.8 8.18 L 343.8 14.9 L 343.38 14.9 L 343.38 8.24 A 6.746 6.746 0 0 0 343.316 7.278 Q 343.156 6.168 342.591 5.572 A 2.079 2.079 0 0 0 342.57 5.55 A 2.623 2.623 0 0 0 341.365 4.857 Q 340.947 4.741 340.448 4.723 A 5.19 5.19 0 0 0 340.26 4.72 Q 339.64 4.72 339.07 4.89 A 3.13 3.13 0 0 0 338.244 5.269 A 2.896 2.896 0 0 0 338.06 5.4 Q 337.62 5.74 337.36 6.26 A 2.44 2.44 0 0 0 337.131 7.009 A 3.166 3.166 0 0 0 337.1 7.46 L 337.1 14.9 L 336.68 14.9 Z"
    ,"M 356.36 9.56 L 356.36 9.7 L 348.44 9.7 L 348.44 10.22 A 7.411 7.411 0 0 0 348.551 11.542 Q 348.686 12.285 348.985 12.876 A 3.791 3.791 0 0 0 349.42 13.55 A 3.173 3.173 0 0 0 351.359 14.68 A 4.798 4.798 0 0 0 352.26 14.76 Q 353.56 14.76 354.47 14.15 A 3.273 3.273 0 0 0 355.427 13.142 A 4.637 4.637 0 0 0 355.84 12.28 L 356.2 12.42 A 4.488 4.488 0 0 1 355.515 13.67 A 3.967 3.967 0 0 1 354.75 14.41 A 3.644 3.644 0 0 1 353.313 15.037 A 5.141 5.141 0 0 1 352.26 15.14 Q 350.22 15.14 349.1 13.79 Q 348.268 12.787 348.054 11.038 A 10.718 10.718 0 0 1 347.98 9.74 A 10.582 10.582 0 0 1 348.077 8.256 Q 348.185 7.498 348.412 6.887 A 4.184 4.184 0 0 1 349.08 5.69 A 3.585 3.585 0 0 1 351.46 4.388 A 5.244 5.244 0 0 1 352.18 4.34 Q 353.2 4.34 353.99 4.71 Q 354.78 5.08 355.3 5.76 A 4.417 4.417 0 0 1 355.852 6.719 A 5.632 5.632 0 0 1 356.09 7.4 A 7.058 7.058 0 0 1 356.307 8.547 A 9.356 9.356 0 0 1 356.36 9.56 Z M 348.44 9.26 L 348.44 9.34 L 355.92 9.34 L 355.92 9.26 Q 355.92 7.712 355.408 6.649 A 3.817 3.817 0 0 0 354.96 5.93 A 3.111 3.111 0 0 0 352.986 4.786 A 4.668 4.668 0 0 0 352.18 4.72 A 4.359 4.359 0 0 0 351.03 4.863 A 3.051 3.051 0 0 0 349.4 5.93 A 4.114 4.114 0 0 0 348.684 7.355 Q 348.516 7.93 348.464 8.615 A 8.464 8.464 0 0 0 348.44 9.26 Z"
    ,"M 368.58 14.9 L 363.46 14.9 A 0.835 0.835 0 0 1 363.23 14.871 Q 362.88 14.771 362.88 14.32 L 362.88 4.96 L 358.86 4.96 L 358.86 4.58 L 362.3 4.58 A 0.835 0.835 0 0 0 362.53 4.551 Q 362.88 4.451 362.88 4 L 362.88 0.94 L 363.3 0.94 L 363.3 4.58 L 368.58 4.58 L 368.58 4.96 L 363.3 4.96 L 363.3 14.52 L 368.58 14.52 L 368.58 14.9 Z"
    ,"M 372.48 14.9 L 372.48 14.52 L 376.58 14.52 L 376.58 4.96 L 372.48 4.96 L 372.48 4.58 L 377 4.58 L 377 14.52 L 380.84 14.52 L 380.84 14.9 L 372.48 14.9 Z M 376.2 0.62 L 376.2 0.46 Q 376.2 0.26 376.33 0.13 Q 376.46 0 376.78 0 Q 377.057 0 377.191 0.097 A 0.317 0.317 0 0 1 377.23 0.13 A 0.439 0.439 0 0 1 377.359 0.423 A 0.586 0.586 0 0 1 377.36 0.46 L 377.36 0.62 Q 377.36 0.82 377.23 0.95 Q 377.1 1.08 376.78 1.08 Q 376.503 1.08 376.369 0.983 A 0.317 0.317 0 0 1 376.33 0.95 A 0.439 0.439 0 0 1 376.201 0.657 A 0.586 0.586 0 0 1 376.2 0.62 Z"
    ,"M 392.06 6.58 L 391.68 6.7 A 3.281 3.281 0 0 0 391.17 5.818 A 2.844 2.844 0 0 0 390.51 5.23 A 3.116 3.116 0 0 0 389.402 4.795 A 4.309 4.309 0 0 0 388.58 4.72 Q 386.76 4.72 385.78 5.93 Q 384.953 6.951 384.824 8.62 A 8.298 8.298 0 0 0 384.8 9.26 L 384.8 10.22 A 7.411 7.411 0 0 0 384.911 11.542 Q 385.046 12.285 385.345 12.876 A 3.791 3.791 0 0 0 385.78 13.55 A 3.186 3.186 0 0 0 387.824 14.702 A 4.733 4.733 0 0 0 388.58 14.76 A 4.259 4.259 0 0 0 389.524 14.66 A 3.107 3.107 0 0 0 390.6 14.2 Q 391.42 13.64 391.84 12.7 L 392.2 12.86 A 3.984 3.984 0 0 1 391.716 13.681 A 4.451 4.451 0 0 1 391.67 13.74 Q 391.34 14.16 390.89 14.47 A 3.622 3.622 0 0 1 390.146 14.86 A 4.303 4.303 0 0 1 389.86 14.96 A 3.986 3.986 0 0 1 389.068 15.117 A 4.975 4.975 0 0 1 388.58 15.14 A 4.748 4.748 0 0 1 387.23 14.958 A 3.565 3.565 0 0 1 385.46 13.79 Q 384.628 12.787 384.414 11.038 A 10.718 10.718 0 0 1 384.34 9.74 Q 384.34 7.04 385.46 5.69 A 3.656 3.656 0 0 1 387.89 4.384 A 5.286 5.286 0 0 1 388.58 4.34 Q 389.94 4.34 390.83 4.97 A 3.338 3.338 0 0 1 391.769 5.961 A 3.212 3.212 0 0 1 392.06 6.58 Z"
    ,"M 395.96 13.1 L 396.26 12.84 A 5.426 5.426 0 0 0 397.108 13.712 A 4.289 4.289 0 0 0 398.08 14.31 Q 399.096 14.758 400.47 14.76 A 8.511 8.511 0 0 0 400.48 14.76 Q 401.685 14.76 402.536 14.406 A 3.337 3.337 0 0 0 403.08 14.12 A 2.089 2.089 0 0 0 404.03 12.589 A 3.207 3.207 0 0 0 404.06 12.14 A 2.917 2.917 0 0 0 404.033 11.733 Q 404.004 11.526 403.943 11.353 A 1.504 1.504 0 0 0 403.87 11.18 Q 403.68 10.8 403.31 10.55 A 2.606 2.606 0 0 0 402.846 10.304 A 3.476 3.476 0 0 0 402.42 10.16 Q 401.904 10.021 401.25 9.922 A 14.702 14.702 0 0 0 401.24 9.92 L 399.64 9.7 A 11.741 11.741 0 0 1 398.848 9.56 A 9.432 9.432 0 0 1 398.35 9.44 Q 397.76 9.28 397.34 8.99 Q 396.92 8.7 396.68 8.25 Q 396.481 7.877 396.447 7.332 A 3.726 3.726 0 0 1 396.44 7.1 A 3.303 3.303 0 0 1 396.488 6.523 Q 396.558 6.129 396.73 5.82 Q 397.02 5.3 397.52 4.97 A 3.301 3.301 0 0 1 398.302 4.595 A 4.035 4.035 0 0 1 398.68 4.49 A 6.059 6.059 0 0 1 399.635 4.355 A 7.248 7.248 0 0 1 400.1 4.34 Q 400.86 4.34 401.47 4.48 Q 402.08 4.62 402.55 4.84 Q 403.02 5.06 403.39 5.36 A 7.067 7.067 0 0 1 403.778 5.698 A 5.648 5.648 0 0 1 404.04 5.96 L 403.76 6.26 Q 403.48 5.96 403.15 5.68 A 3.344 3.344 0 0 0 402.644 5.328 A 4.03 4.03 0 0 0 402.38 5.19 A 4.382 4.382 0 0 0 401.847 4.979 A 5.623 5.623 0 0 0 401.38 4.85 A 4.727 4.727 0 0 0 400.815 4.757 Q 400.473 4.72 400.08 4.72 A 6.206 6.206 0 0 0 399.145 4.786 Q 398.654 4.861 398.25 5.021 A 3.031 3.031 0 0 0 397.74 5.28 Q 396.86 5.84 396.86 7.08 A 2.917 2.917 0 0 0 396.887 7.487 Q 396.916 7.694 396.977 7.867 A 1.504 1.504 0 0 0 397.05 8.04 Q 397.24 8.42 397.61 8.67 Q 397.98 8.92 398.5 9.07 Q 399.02 9.22 399.68 9.3 L 401.28 9.52 A 11.741 11.741 0 0 1 402.072 9.66 A 9.432 9.432 0 0 1 402.57 9.78 Q 403.16 9.94 403.58 10.23 Q 404 10.52 404.24 10.98 A 1.992 1.992 0 0 1 404.418 11.486 Q 404.48 11.775 404.48 12.12 A 3.301 3.301 0 0 1 404.416 12.784 A 2.463 2.463 0 0 1 404.17 13.47 Q 403.86 14.04 403.33 14.41 Q 402.8 14.78 402.07 14.96 A 6.211 6.211 0 0 1 401.014 15.122 A 7.383 7.383 0 0 1 400.5 15.14 Q 397.58 15.14 395.96 13.1 Z"


]

export function TitlePainter(){
    const { titleControls, setNarratorEvent } = useStarFireSync();
    const titleRef = useRef(null);
    const onCompleteRef = useRef(titleControls.onComplete);
    const handleKeyDownRef = useRef();
    const [groupBBox, setGroupBBox] = useState({ width: 0, height: 0 });
    const [nextButtonVisible, setNextButtonVisible] = useState(false);

    useEffect(()=>{
        console.log('titleControls', titleControls);
    }, [titleControls]);


    const updateBBox = () => {
        if (titleRef.current) {
            const bbox = titleRef.current.getBBox();
            setGroupBBox({
                width: bbox.width,
                height: bbox.height
            });
        }
    };

    useEffect(()=>{
        if(!titleControls.visible){
            setNextButtonVisible(false);
        }
    }, [titleControls]);

    const handleKeyDown = useCallback((event) => {
        if (event.key === ' ') {
            console.log('triggering listener!')
            setNextButtonVisible(false);
            window.removeEventListener('keydown', handleKeyDownRef.current);
            event.preventDefault();
            setNarratorEvent('conceptual-pitch')
            // titleControls.onComplete && titleControls.onComplete();
        }
    }, [titleControls]);

    useEffect(() => {
        handleKeyDownRef.current = handleKeyDown;
    }, [handleKeyDown]);

    useEffect(() => {
        onCompleteRef.current = titleControls.onComplete;
    }, [titleControls.onComplete]);


    useEffect(() => {
        if (titleControls.visible) {
            window.addEventListener('keydown', handleKeyDownRef.current);
        } else {
            window.removeEventListener('keydown', handleKeyDownRef.current);
        }

        return () => {
            window.removeEventListener('keydown', handleKeyDownRef.current);
        };
    }, [titleControls.visible]);

    useEffect(() => {
        updateBBox();
        window.addEventListener('resize', updateBBox);
        return () => window.removeEventListener('resize', updateBBox);
    }, [titleRef.current, titleControls]);

    return(
        <>
        <AnimatePresence>
        
        {titleControls.visible && (
            <>
            <div className={styles.titlePainter}>
               <svg 
                    className={styles.title}
                    width="100vw" // Set the desired width
                    height="100vh" // Set the desired 
                    viewBox="0 0 600 600"
                    preserveAspectRatio="xMidYMid meet" // Center the SVG
                    // filter="url(#pencilTexture4)"
                    // fill="url(#gradient)"
                    // initial={{ opacity: 0 }}
                    // animate={{ opacity: 1 }}
                    // exit={{ opacity: 0 }}
                    // transition={{ duration: 2, delay: 4 }}
                >
                    <defs>
                        <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style={{ stopColor: "#FF9A8B", stopOpacity: 1 }} />
                            <stop offset="100%" style={{ stopColor: "#FF6F61", stopOpacity: 1 }} />
                        </linearGradient>
                        <filter id="glow" x="-50%" y="-50%" width="200%" height="200%">
                            <feGaussianBlur stdDeviation="3.5" result="coloredBlur"/>
                            <feMerge>
                                <feMergeNode in="coloredBlur"/>
                                <feMergeNode in="SourceGraphic"/>
                            </feMerge>
				        </filter>
                        <filter id="combined">
                            <feTurbulence type="fractalNoise" baseFrequency=".05" numOctaves="4" />
                            <feDisplacementMap in="SourceGraphic" scale="4" />
                        </filter>
                    </defs>
                    <g id="svgGroup" strokeLinecap="round" fillRule="evenodd" 
                    style={{stroke:"white", strokeWidth: "0.25mm", fill: "white"}}
                    ref={titleRef}
                    transform={`translate(${(600 - groupBBox.width) / 2}, ${((600 - groupBBox.height) / 2) - 100})`}
                    >
                        {motionPaths.map((path, idx) => 
                       
                             <motion.path 
                             filter="url(#glow) url(#combined)"
                             key={`$title-path-${idx}-${titleControls.visible}`}
                             strokeWidth="3px"
                             initial={{ pathLength: 0, fillOpacity: 0, opacity: 1 }}
                             animate={{ 
                                 pathLength: titleControls.visible ? [0, 0.01, 1.5] : [0, 0, 0], 
                                 fillOpacity: titleControls.visible ? [0, 0.01, 0] : [0, 0, 0], 
                                 opacity: titleControls.visible ? [1, 1, 1] : [0, 0, 0],
                                 transition: {
                                    duration: titleControls.immediate ? 0 : (titleControls.duration || 1),
                                    delay: titleControls.delay ? titleControls.delay + idx * 0.25 : idx * 0.25,
                                    times: [0, 0.01, 1],
                                    ease: "easeInOut"
                                 }
                             }}
                             exit={{ 
                                    opacity: 0, 
                                    transition: { 
                                        duration: titleControls.immediate ? 0 : (titleControls.duration || 1),
                                        delay: titleControls.delay ? titleControls.delay + idx * 0.25 : idx * 0.25,
                                        ease: "easeInOut"
                                    } 
                                }}
                             onAnimationComplete={(animation)=>{
                                console.log("title animation opacity", animation)
                                if(idx === motionPaths.length - 1 && animation.opacity === 0){
                                    console.log('triggering title onComplete', titleControls.onComplete)
                                    onCompleteRef.current && onCompleteRef.current()
                                }
                                else if(idx === (motionPaths.length - 1) && (animation.opacity?.length === 3)){
                                    setNextButtonVisible(true)
                                }
                             }}
                             d={path} 
                             id="0" 
                             vectorEffect="non-scaling-stroke"/>
                        )}
                    </g>
                    
                </svg>
            </div>

            <div
                key='title-component'
                className={styles.titleContainer}
                >
                <div className={styles.titleContainerInner}>
                    <motion.div 
                        key="title-darkening"
                        className={styles.titleContainerDarkening}
                        initial={{ opacity: 0 }}
                        animate={{ opacity: titleControls.visible ? 1 : 0 }}
                        exit={{ opacity: 0 }}
                        transition={{ duration: titleControls.immediate ? 0 : (titleControls.duration || 1), delay: titleControls.delay || 0 }}
                    />
                </div>    
            </div>
            <motion.div 
                    key='subtitle-container'
                    className={styles.subtitleContainer}
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0, transition: { delay: 1, duration: 2 } }}
                    transition={{ duration: 1, delay: 3.5 }}
                >
                    <div className={styles.subtitle}>
                        Beautiful Social Portfolios [v0.1]
                    </div>
                </motion.div>
            {/* second version to create contrast */}
            <motion.div 
                    key='subtitle-container-backlight'
                    className={styles.subtitleContainer}
                    initial={{ opacity: 0 }}
                    animate={{ opacity: 1 }}
                    exit={{ opacity: 0, transition: { delay: 1, duration: 2} }}
                    transition={{ duration: 1 , delay: 3.5 }}
                    style={{
                        mixBlendMode: 'unset'
                    }}
                >
                    <div className={styles.subtitle} style={{
                        color: 'rgba(255, 255, 255, 0.2)'
                    }}>
                        Beautiful Social Portfolios [v0.1]
                    </div>
                </motion.div>
            <AnimatePresence>
                {nextButtonVisible && (
                    <motion.div 
                        key='next-button-container'
                        className={styles.nextButtonContainerWrapper}
                        initial={{ opacity: 0 }}
                        animate={{ opacity: 1 }}
                        exit={{ opacity: 0, transition: { duration: 0 } }}
                        transition={{ duration: 2 }}
                    >
                        <div className={styles.nextButtonContainer}>
                            press space to start demo
                        </div>
                    </motion.div>
                 )
                }
            </AnimatePresence>
        </>
        )}
        
        </AnimatePresence>
        </>
    )
}